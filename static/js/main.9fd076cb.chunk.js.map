{"version":3,"sources":["styleEditor.js","heart.js","heartRain.js","App.js","index.js"],"names":["StyleEditor","toBottom","styleWrapper","scrollTop","saveRef","child","code","this","props","highlightCode","Prism","highlight","languages","css","ref","className","dangerouslySetInnerHTML","__html","React","Component","Heart","onClick","click","randomNumber","start","end","Math","random","Rain","endTime","c","dom","window","innerWidth","innerHeight","startX","endX","endY","init","delay","setTimeout","style","left","top","display","transition","transitionTimingFunction","fontSize","HeartRain","queue","container","rainNum","num","i","push","key","document","createElement","body","append","ReactDOM","render","unmountComponentAtNode","removeChild","isPc","userAgentInfo","navigator","userAgent","Agents","flag","v","length","indexOf","App","fullStyle","state","currentStyleCode","finished","heartRains","interval","saveStyleEditorRef","styleEditor","rain","time","Date","getTime","stayTime","setState","removeRain","n","showStyle","Promise","resolve","char","progressiveShowStyle","filter","item","map","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9fd076cb.chunk.js","sourcesContent":["import React from 'react';\nimport Prism from 'prismjs'\n\nexport default class StyleEditor extends React.Component {\n\n    toBottom = () => {\n        if (this.styleWrapper) {\n            this.styleWrapper.scrollTop = 1000000;\n        }\n    }\n\n    saveRef = child => this.styleWrapper = child;\n\n    render() {\n        const { code } = this.props;\n        const highlightCode = Prism.highlight(code, Prism.languages.css);\n        return <div ref={this.saveRef} className=\"styleEditor\">\n            <style dangerouslySetInnerHTML={{__html: code}}></style>\n            <pre dangerouslySetInnerHTML={{__html: highlightCode}}></pre>\n        </div>\n    }\n}","import React from 'react';\n\nexport default class Heart extends React.Component {\n\n    onClick = () => {\n        const { click } = this.props\n        click && click();\n    }\n\n    render() {\n        return <div className=\"heartWrapper\">\n            <div className=\"heart\" onClick={this.onClick}></div>\n            <div className=\"heart bounce\" onClick={this.onClick}></div>\n        </div>\n    }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nfunction randomNumber(start, end) {\n  return start + Math.random() * (end - start);\n}\n\nclass Rain extends React.Component {\n  start = [0, 0];\n  end = [0, 0];\n  endTime = 0;\n\n  init() {\n    const { innerWidth, innerHeight } = window;\n    const startX = randomNumber(0, innerWidth);\n    const startY = -30;\n    this.start = [startX, startY];\n    const endX = randomNumber(0, innerWidth);\n    const endY = innerHeight + 30;\n    this.end = [endX, endY];\n    this.endTime = randomNumber(3, 3.5) * 1000;\n  }\n\n  componentWillMount() {\n    this.init();\n  }\n\n  componentDidMount() {\n    const { delay } = this.props;\n    setTimeout(() => {\n      if (this.dom) {\n        const { end } = this;\n        this.dom.style.left = `${end[0]}px`;\n        this.dom.style.top = `${end[1]}px`;\n      }\n      setTimeout(() => {\n        if (this.dom) {\n          this.dom.style.display = 'none';\n        }\n      }, this.endTime);\n    }, delay);\n  }\n\n  saveRef = (c) => (this.dom = c);\n\n  render() {\n    const { start, endTime } = this;\n    return (\n      <span\n        ref={this.saveRef}\n        className=\"rain\"\n        style={{\n          left: start[0],\n          top: start[1],\n          transition: `all ${endTime / 1000}s`,\n          transitionTimingFunction: 'linear',\n          fontSize: 20,\n        }}\n      ></span>\n    );\n  }\n}\n\nexport default class HeartRain extends React.Component {\n  queue = [];\n\n  container = null;\n\n  componentWillMount() {\n    this.init();\n  }\n\n  init() {\n    const rainNum = this.props.num;\n    for (let i = 0; i < rainNum; i++) {\n      const delay = randomNumber(i * 200, i * 200 + 1000);\n      this.queue.push(<Rain key={i} delay={delay} />);\n    }\n    const container = document.createElement('div');\n    this.container = container;\n    document.body.append(container);\n  }\n\n  componentDidMount() {\n    ReactDOM.render(<div>{this.queue}</div>, this.container);\n  }\n\n  componentWillUnmount() {\n    if (this.container) {\n      ReactDOM.unmountComponentAtNode(this.container);\n      document.body.removeChild(this.container);\n      this.container = null;\n      this.queue = null;\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n","import React from 'react';\nimport StyleEditor from './styleEditor';\nimport Heart from './heart';\nimport HeartRain from './heartRain';\n\nconst isPc = (function () {\n  var userAgentInfo = navigator.userAgent;\n  var Agents = [\n    'Android',\n    'iPhone',\n    'SymbianOS',\n    'Windows Phone',\n    'iPad',\n    'iPod',\n  ];\n  var flag = true;\n  for (var v = 0; v < Agents.length; v++) {\n    if (userAgentInfo.indexOf(Agents[v]) > 0) {\n      flag = false;\n      break;\n    }\n  }\n  return flag;\n})();\n\nexport default class App extends React.Component {\n  fullStyle = [\n    `/*\n* Hi。宝贝！\n* 这么久了。还没和宝贝说过我的工作呢！\n* 我是个前端工程师。俗称程序员。网页相关。\n* 如这个页面。就是个什么也没有的网页。\n* 我的工作就是给这种空白的页面加点儿东西。\n* 嗯。说起来手机和电脑还得区分一下。\n* 你现在用的是。。。${isPc ? '电脑' : '手机'}\n*/\n\n/* 首先给所有元素加上过渡效果 */\n* {\n  -webkit-transition: all .5s;\n  transition: all .5s;\n}\n/* 白色背景太单调了。来点背景 */\nbody, html {\n  color: #fff;\n  background-color: darkslategray;\n}\n\n/* 文字太近了 */\n.styleEditor {\n  overflow: auto;\n  ${\n    isPc\n      ? `width: 48vw;\n  height: 96vh;`\n      : `width: 96vw;\n  height: 48vh;`\n  }\n  border: 1px solid;\n  font-size: 14px;\n  line-height: 1.5;\n  padding: 10px;\n}\n\n/* 这些代码颜色都一样。加点儿高亮区别来 */\n.token.selector{ color: rgb(133,153,0) }\n.token.property{ color: rgb(187,137,0) }\n.token.punctuation{ color: yellow }\n.token.function{ color: rgb(42,161,152) }\n.token.comment{ color: rgb(177,177,177) }\n\n/* 加个 3D 效果 */\nhtml{\n  perspective: 1000px;\n  -webkit-perspective: 1000px;\n}\n\n.styleEditor {\n  ${\n    isPc\n      ? `transform: rotateY(10deg) translateZ(-100px) ;\n  -webkit-transform: rotateY(10deg) translateZ(-100px);`\n      : `transform: rotateX(-10deg) translateZ(-100px);\n  -webkit-transform: rotateX(-10deg) translateZ(-100px);`\n  } ${\n      isPc\n        ? ''\n        : `\n  transform-origin: 50% 0% 0;\n  -webkit-transform-origin: 50% 0% 0;`\n    }\n}\n\n/*\n* 宝贝，今天教你写代码。\n* 用代码画一个爱心。\n*/\n\n/* 首先，来一个画板 */\n.heartWrapper {\n  ${\n    isPc\n      ? `width: 48vw;\n  height: 96vh;`\n      : `width: 96vw;\n  height: 48vh;`\n  }\n  position: relative;\n  border: 1px solid;\n  background-color: white;\n  ${\n    isPc\n      ? `transform: rotateY(-10deg) translateZ(-100px);\n  -webkit-transform: rotateY(-10deg) translateZ(-100px);`\n      : `transform: rotateX(10deg) translateZ(-100px);\n  -webkit-transform: rotateX(10deg) translateZ(-100px);`\n  }${\n      isPc\n        ? ''\n        : `\n  transform-origin: 50% 0% 0;\n  -webkit-transform-origin: 50% 0% 0;`\n    }\n}\n\n/* 画一个方块，当左心室和右心室 */\n.heart {\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -50px 0 0 -50px;\n  border-radius: 20px;\n  background: #E88D8D;\n  transform: rotate(45deg);\n}\n\n/* 画上左心房 */\n.heart::before {\n  content: '';\n  background: #E88D8D;\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  left: -38px;\n  top: 1px;\n}\n\n/* 再画上右心房 */\n.heart::after {\n  content: '';\n  background: #E88D8D;\n  border-radius: 50%;\n  width: 100px;\n  height: 100px;\n  position: absolute;\n  right: -1px;\n  top: -38px;\n}\n\n/* 太单调了，让心跳动起来 */\n@keyframes throb {\n  0% {\n    transform: scale(1) rotate(45deg);\n    opacity: 1;\n  }\n\n  100% {\n    transform: scale(1.65) rotate(45deg);\n    opacity: 0\n  }\n}\n\n.bounce {\n  opacity: 0.2;\n  animation: throb 1s infinite linear;\n}\n/*\n* Ok，完成！\n* 宝贝，每一天都要快乐！\n*/\n\n`,\n  ];\n\n  state = {\n    currentStyleCode: '',\n    finished: false,\n    heartRains: [],\n  };\n\n  interval = 30;\n  // interval = 0;\n\n  progressiveShowStyle(n = 0) {\n    const { interval, fullStyle } = this;\n    const showStyle = (i) =>\n      new Promise((resolve) => {\n        const style = fullStyle[n];\n        const char = style[i];\n        if (!style || !char) {\n          resolve();\n          return;\n        }\n        let { currentStyleCode } = this.state;\n        currentStyleCode += char;\n        this.setState({\n          currentStyleCode,\n        });\n        if (char === '\\n' && this.styleEditor) {\n          this.styleEditor.toBottom();\n        }\n        setTimeout(() => {\n          resolve(showStyle(i + 1));\n        }, interval);\n      });\n    return showStyle(0);\n  }\n\n  componentDidMount() {\n    this.progressiveShowStyle(0);\n    this.setState({ finished: true });\n    this.rain();\n  }\n\n  saveStyleEditorRef = (child) => (this.styleEditor = child);\n\n  rain = () => {\n    let { heartRains } = this.state;\n    const rainNum = 30;\n    const stayTime = rainNum * 200 + 1000 + 4000;\n    const time = new Date().getTime();\n    if (\n      !heartRains.length ||\n      time - heartRains[heartRains.length - 1].time > stayTime / 2\n    ) {\n      heartRains.push({ time, rainNum });\n      this.setState({ heartRains });\n      setTimeout(() => {\n        this.removeRain(time);\n      }, stayTime);\n    }\n  };\n\n  removeRain(time) {\n    let { heartRains } = this.state;\n    heartRains = heartRains.filter((item) => item.time !== time);\n    this.setState({ heartRains });\n  }\n\n  render() {\n    const { currentStyleCode, finished, heartRains } = this.state;\n    return (\n      <div>\n        <div style={{ display: isPc ? 'flex' : '' }}>\n          <StyleEditor ref={this.saveStyleEditorRef} code={currentStyleCode} />\n          <Heart click={finished ? this.rain : null} />\n        </div>\n        {heartRains.map((item) => (\n          <HeartRain num={item.rainNum} key={item.time} />\n        ))}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}